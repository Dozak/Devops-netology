# Домашнее задание к занятию "12.2 Команды для работы с Kubernetes"
## Задание 1: Запуск пода из образа в деплойменте
>Для начала следует разобраться с прямым запуском приложений из консоли. Такой подход поможет быстро развернуть инструменты отладки в кластере. Требуется запустить деплоймент на основе образа из hello world уже через deployment. Сразу стоит запустить 2 копии приложения (replicas=2).
>
>Требования:
> * пример из hello world запущен в качестве deployment
> * количество реплик в deployment установлено в 2
> * наличие deployment можно проверить командой kubectl get deployment
> * наличие подов можно проверить командой kubectl get pods

[Deployment](files/12.4/deployment.yaml)
```
root@dozak:/home/dozak# kubectl create namespace app-namespace
namespace/app-namespace created
root@dozak:/home/dozak# kubectl apply -f deployment.yaml
deployment.apps/hello-world created
root@dozak:/home/dozak# kubectl get deploy -n app-namespace
NAME          READY   UP-TO-DATE   AVAILABLE   AGE
hello-world   2/2     2            2           28s
root@dozak:/home/dozak# kubectl get po -n app-namespace
NAME                           READY   STATUS    RESTARTS   AGE
hello-world-5c6748dcbc-r6d2n   1/1     Running   0          34s
hello-world-5c6748dcbc-tklf8   1/1     Running   0          34s
```
## Задание 2: Просмотр логов для разработки
>Разработчикам крайне важно получать обратную связь от штатно работающего приложения и, еще важнее, об ошибках в его работе. Требуется создать пользователя и выдать ему доступ на чтение конфигурации и логов подов в app-namespace.
>
>Требования:
> * создан новый токен доступа для пользователя
> * пользователь прописан в локальный конфиг (~/.kube/config, блок users)
> * пользователь может просматривать логи подов и их конфигурацию (kubectl logs pod <pod_id>, kubectl describe pod <pod_id>)

[Service_accaunt](files/12.4/Service_accaunt.yaml)
[Role](files/12.4/role.yaml)
[Role](files/12.4/Role_Binding.yaml)

```
root@dozak:/home/dozak# kubectl apply -f Service_accaunt.yaml -n app-namespace
serviceaccount/doz created
root@dozak:/home/dozak# kubectl apply -f role.yaml -n app-namespace
role.rbac.authorization.k8s.io/view created
root@dozak:/home/dozak# kubectl apply -f Role_Binding.yaml -n app-namespace
rolebinding.rbac.authorization.k8s.io/pod-view created
root@dozak:/home/dozak# kubectl get secret
NAME                  TYPE                                  DATA   AGE
default-token-s9jr8   kubernetes.io/service-account-token   3      2d23h
root@dozak:/home/dozak# cat ~/.kube/config
```
![Config](Pictures/12.2_kube_config.png)
